<!DOCTYPE html>
<html lang="en">
	<head> 
		<title>LudumDare 22</title> 
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
		<style type="text/css"> 
			body {margin:0;padding:0; background-color: #110;}
			div {margin:0 auto;max-width:1280px;}

			.sjs {
    			background:#f1f4fe;
    			border:1px #333 solid;}


			</style>

		</style> 
		<script type="text/javascript" src='sprite.js'></script> 
		<script src="lib/collision.js"></script>
		<script type="text/javascript">
		//declare sprites
		var zombie;
		var background1;
		var tree1;
		var mine1;
		var mine2;
		var mine3;
		var mine4;
		var mine5;
		var mine6;
		var mine7;
		var mine8;
		var mine9;
		var starr1;
		var starr2;
		var starr3;
		var stary1;
		var stary2;
		var stary3;
		var boom;
		var gameover;

			function Engine(scene, layer){
				this.scene = scene;
				this.layer = layer;
				this.inputs = scene.Input();
				
				

				//sprites
				background1 = this.mybackground1 = this.scene.Sprite("background.png",{
					"layer": this.layer,
					"x": 0, 	//X position of sprite
					"y": 0, 	//Y position of sprite
					"w": 800, 	//width of sprite.
					"h": 600 	//height of sprite.
				});
				
				tree1 = this.mytree1 = this.scene.Sprite("tree1.png",{
					"layer": this.layer,
					"x": 600, 	//X position of sprite
					"y": 170, 	//Y position of sprite
					"w": 400, 	//width of sprite.
					"h": 400 	//height of sprite.
				});
				
				mine1 = this.mymine1 = this.scene.Sprite("tellermine.png",{
					"layer": this.layer,
					"x": 3000, 	//X position of sprite
					"y": 500, 	//Y position of sprite
					"w": 58, 	//width of sprite.
					"h": 31 	//height of sprite.
				});

				mine2 = this.mymine2 = this.scene.Sprite("tellermine.png",{
					"layer": this.layer,
					"x": 3150, 	//X position of sprite
					"y": 500, 	//Y position of sprite
					"w": 58, 	//width of sprite.
					"h": 31 	//height of sprite.
				});

				mine3 = this.mymine3 = this.scene.Sprite("tellermine.png",{
					"layer": this.layer,
					"x": 3300, 	//X position of sprite
					"y": 500, 	//Y position of sprite
					"w": 58, 	//width of sprite.
					"h": 31 	//height of sprite.
				});

				mine4 = this.mymine4 = this.scene.Sprite("tellermine.png",{
					"layer": this.layer,
					"x": 4500, 	//X position of sprite
					"y": 500, 	//Y position of sprite
					"w": 58, 	//width of sprite.
					"h": 31 	//height of sprite.
				});

				mine5 = this.mymine5 = this.scene.Sprite("tellermine.png",{
					"layer": this.layer,
					"x": 4700, 	//X position of sprite
					"y": 500, 	//Y position of sprite
					"w": 58, 	//width of sprite.
					"h": 31 	//height of sprite.
				});

				mine6 = this.mymine6 = this.scene.Sprite("tellermine.png",{
					"layer": this.layer,
					"x": 4900, 	//X position of sprite
					"y": 500, 	//Y position of sprite
					"w": 58, 	//width of sprite.
					"h": 31 	//height of sprite.
				});

				mine7 = this.mymine7 = this.scene.Sprite("tellermine.png",{
					"layer": this.layer,
					"x": 1500, 	//X position of sprite
					"y": 500, 	//Y position of sprite
					"w": 58, 	//width of sprite.
					"h": 31 	//height of sprite.
				});

				mine8 = this.mymine8 = this.scene.Sprite("tellermine.png",{
					"layer": this.layer,
					"x": 1500, 	//X position of sprite
					"y": 500, 	//Y position of sprite
					"w": 58, 	//width of sprite.
					"h": 31 	//height of sprite.
				});

				mine9 = this.mymine9 = this.scene.Sprite("tellermine.png",{
					"layer": this.layer,
					"x": 1500, 	//X position of sprite
					"y": 500, 	//Y position of sprite
					"w": 58, 	//width of sprite.
					"h": 31 	//height of sprite.
				});

				stary1 = this.mystary1 = this.scene.Sprite("staryellow.png",{
					"layer": this.layer,
					"x": 12000, 	//X position of sprite
					"y": 125, 	//Y position of sprite
					"w": 200, 	//width of sprite.
					"h": 200 	//height of sprite.
				});

				stary2 = this.mystary2 = this.scene.Sprite("staryellow.png",{
					"layer": this.layer,
					"x": 12270, 	//X position of sprite
					"y": 0, 	//Y position of sprite
					"w": 200, 	//width of sprite.
					"h": 200 	//height of sprite.
				});

				stary3 = this.mystary3 = this.scene.Sprite("staryellow.png",{
					"layer": this.layer,
					"x": 12550, 	//X position of sprite
					"y": 125, 	//Y position of sprite
					"w": 200, 	//width of sprite.
					"h": 200 	//height of sprite.
				});				

				starr1 = this.mystarr1 = this.scene.Sprite("starred.png",{
					"layer": this.layer,
					"x": -500, 	//X position of sprite
					"y": 125, 	//Y position of sprite
					"w": 200, 	//width of sprite.
					"h": 200 	//height of sprite.
				});

				starr2 = this.mystarr2 = this.scene.Sprite("starred.png",{
					"layer": this.layer,
					"x": -500, 	//X position of sprite
					"y": 125, 	//Y position of sprite
					"w": 200, 	//width of sprite.
					"h": 200 	//height of sprite.
				});

				starr3 = this.mystarr3 = this.scene.Sprite("starred.png",{
					"layer": this.layer,
					"x": -500, 	//X position of sprite
					"y": 0, 	//Y position of sprite
					"w": 200, 	//width of sprite.
					"h": 200 	//height of sprite.
				});


				zombie = this.myzombie = this.scene.Sprite("zombie.png",{
					"layer": this.layer,
					"x": 20, 	//X position of sprite
					"y": 325, 	//Y position of sprite
					"w": 160, 	//width of sprite.
					"h": 200 	//height of sprite.

				});
				
				boom = this.myboom = this.scene.Sprite("boom.png",{
					"layer": this.layer,
					"x": 10000, 	//X position of sprite
					"y": 275, 	//Y position of sprite
					"w": 400, 	//width of sprite.
					"h": 400 	//height of sprite.

				});

				gameover = this.mygameover = this.scene.Sprite("gameover.png",{
					"layer": this.layer,
					"x": 10000, 	//X position of sprite
					"y": 100, 	//Y position of sprite
					"w": 800, 	//width of sprite.
					"h": 124 	//height of sprite.

				});
				


				
				
				
				//ticker method
				this.setTicker = function(ticker){
					this.ticker = ticker;
				}
				
				var speed = 0;
				var jumping = false;
				var yv = 0
				
				

				
				
				this.run = function(){
				
					//get current x and y.
					nx = this.myzombie.x;
					ny = this.myzombie.y;

					mx = this.mybackground1.x;
					my = this.mybackground1.y;

					ox = this.mytree1.x;
					oy = this.mytree1.y;
					
					px1 = this.mymine1.x;
					py1 = this.mymine1.y;

					px2 = this.mymine2.x;
					py2 = this.mymine2.y;

					px3 = this.mymine3.x;
					py3 = this.mymine3.y;
					
					px4 = this.mymine4.x;
					py4 = this.mymine4.y;

					px5 = this.mymine5.x;
					py5 = this.mymine5.y;

					px6 = this.mymine6.x;
					py6 = this.mymine6.y;

					px7 = this.mymine7.x;
					py7 = this.mymine7.y;
					
					px8 = this.mymine8.x;
					py8 = this.mymine8.y;

					px9 = this.mymine9.x;
					py9 = this.mymine9.y;

					sx1 = this.mystarr1.x;
					sy1 = this.mystarr1.y;

					sx2 = this.mystarr2.x;
					sy2 = this.mystarr2.y;

					sx3 = this.mystarr3.x;
					sy3 = this.mystarr3.y;
					
					sx4 = this.mystary1.x;
					sy4 = this.mystary1.y;

					sx5 = this.mystary2.x;
					sy5 = this.mystary2.y;

					sx6 = this.mystary3.x;
					sy6 = this.mystary3.y;
					
					qx = this.myboom.x;
					qy = this.myboom.y;

					rx = this.mygameover.x;
					ry = this.mygameover.y;


					//Update on keyboard input
					if(this.inputs.keyboard.left){
						
						
					}
					if(this.inputs.keyboard.right){
						ox -= 2.5
						px1 -= 2.5
						px2 -= 2.5
						px3 -= 2.5
						px4 -= 2.5
						px5 -= 2.5
						px6 -= 2.5
						if(sx4>30){
							sx4-=5
							sx5-=5
							sx6-=5}
						
						
							
							this.myzombie.rotate((Math.random()-0.5)*0.02);
						if(this.myzombie.angle >0.1){
							this.myzombie.rotate(-0.01)
							}
						if(this.myzombie.angle <(-0.1)){
							this.myzombie.rotate(0.01)
							}
					}
					//jump
					if((sx1===30 && sx2===300 && sx3 ===580)===false){
					if(ny===325){
						yv = 0
					}
					if(this.inputs.keyboard.up && ny===325){
							yv -= 10
					}						
					if(ny<325){
						yv = yv + 0.3;
					}
					
					nx = nx
					ny = Math.min(ny + yv,325)
					if(yv>0 && ny===325)
            					yv = 0;}
					//end jump
					if(this.inputs.keyboard.down){
						
									
					}
					if((this.mymine1.isPointIn(62, 500)&& ny === 325)||(this.mymine1.isPointIn(138, 500)&& ny === 325)){
						qx = 20;
						rx = 0;
						ticker.pause();
					}

					if((this.mymine2.isPointIn(62, 500)&& ny === 325)||(this.mymine2.isPointIn(138, 500)&& ny === 325)){
						qx = 20;
						rx = 0;
						ticker.pause();
					}

					if((this.mymine3.isPointIn(62, 500)&& ny === 325)||(this.mymine3.isPointIn(138, 500)&& ny === 325)){
						qx = 20;
						rx = 0;
						ticker.pause();
					}

					if((this.mymine4.isPointIn(62, 500)&& ny === 325)||(this.mymine4.isPointIn(138, 500)&& ny === 325)){
						qx = 20;
						rx = 0;
						ticker.pause();
					}

					if((this.mymine5.isPointIn(62, 500)&& ny === 325)||(this.mymine5.isPointIn(138, 500)&& ny === 325)){
						qx = 20;
						rx = 0;
						ticker.pause();
					}
					
					if((this.mymine6.isPointIn(62, 500)&& ny === 325)||(this.mymine6.isPointIn(138, 500)&& ny === 325)){
						qx = 20;
						rx = 0;
						ticker.pause();
					}

					var star1= false
					var star2= false
					var star3= false
					
					

					if(sx4<=30){
					if(this.inputs.mouse.position.x < 230 && this.inputs.mouse.position.x > 30 && this.inputs.mouse.position.y > 125 && 						this.inputs.mouse.position.y < 325 && this.inputs.mousedown
					){
						sx1 = 30
						sx4 = -1000
						
					}

					if(this.inputs.mouse.position.x < 500 && this.inputs.mouse.position.x > 300 && this.inputs.mouse.position.y > 0 && 						this.inputs.mouse.position.y < 200 && this.inputs.mousedown
					){
						sx2 = 300
						sy2 = 0
					}

					if(this.inputs.mouse.position.x < 780 && this.inputs.mouse.position.x > 580 && this.inputs.mouse.position.y > 125 && 						this.inputs.mouse.position.y < 325 && this.inputs.mousedown
					){
						sx3 = 580
						sy3 = 125
						
						
					}
						}

					if(sx1===30 && sx2===300 && sx3 ===580)
						ny -=1
					
					
					//deko
						
					//tell them
					this.myzombie.position(nx,ny);
					this.myzombie.update();
					
					this.mybackground1.position(mx,my);
					this.mybackground1.offset(0,0);
					this.mybackground1.update();	
					
					this.mytree1.position(ox,oy);
					this.mytree1.offset(0,0);
					this.mytree1.update();	

					this.mymine1.position(px1,py1);
					this.mymine1.offset(0,0);
					this.mymine1.update();

					this.mymine2.position(px2,py2);
					this.mymine2.offset(0,0);
					this.mymine2.update();

					this.mymine3.position(px3,py3);
					this.mymine3.offset(0,0);
					this.mymine3.update();

					this.mymine4.position(px4,py4);
					this.mymine4.offset(0,0);
					this.mymine4.update();

					this.mymine5.position(px5,py5);
					this.mymine5.offset(0,0);
					this.mymine5.update();

					this.mymine6.position(px6,py6);
					this.mymine6.offset(0,0);
					this.mymine6.update();

					this.mymine7.position(px7,py7);
					this.mymine7.offset(0,0);
					this.mymine7.update();

					this.mymine8.position(px8,py8);
					this.mymine8.offset(0,0);
					this.mymine8.update();

					this.mymine9.position(px9,py9);
					this.mymine9.offset(0,0);
					this.mymine9.update();

					this.mystarr1.position(sx1,sy1);
					this.mystarr1.offset(0,0);
					this.mystarr1.update();

					this.mystarr2.position(sx2,sy2);
					this.mystarr2.offset(0,0);
					this.mystarr2.update();

					this.mystarr3.position(sx3,sy3);
					this.mystarr3.offset(0,0);
					this.mystarr3.update();

					this.mystary1.position(sx4,sy4);
					this.mystary1.offset(0,0);
					this.mystary1.update();

					this.mystary2.position(sx5,sy5);
					this.mystary2.offset(0,0);
					this.mystary2.update();

					this.mystary3.position(sx6,sy6);
					this.mystary3.offset(0,0);
					this.mystary3.update();
					
					this.myboom.position(qx,qy);
					this.myboom.offset(0,0);
					this.myboom.update();	

					this.mygameover.position(rx,ry);
					this.mygameover.offset(0,0);
					this.mygameover.update();	


					
				
				}
			}	
			//Bootstap
			var bootstrap = function(){
				
				var game_height = 600;
    				var game_width = 800;
    				var scene = sjs.Scene({w:game_width, h:game_height});
				var layer = scene.Layer("game_layer");
				//Load images needed to display
				scene.loadImages([
					
					 ], 
				 function() {
						engine = new Engine(scene, layer);
						ticker = scene.Ticker(function() { engine.run(); });
						engine.setTicker(ticker);
						ticker.run();
					});
			}
			//Bootstap Game
			window.addEventListener("load", bootstrap, false);
		</script>

	</head> 
	<body> 
		<div id='game_map'>
		
		
		</div>
	</body> 
</html> 
